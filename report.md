# Доклад: Триангуляция Делоне с динамическим кешированием

## 1. Введение

Триангуляция Делоне — это метод разбиения множества точек на плоскости на треугольники, который обеспечивает наилучшую форму треугольников. Основная идея заключается в том, что никакая точка не должна лежать внутри описанной окружности любого треугольника. В данном докладе рассматривается алгоритм с **динамическим кешированием** для ускорения поиска треугольников, содержащих заданные точки.

---

## 2. Используемые библиотеки

Для реализации алгоритма триангуляции Делоне с динамическим кешированием использовались следующие библиотеки:

1. **`numpy`**:
   - **Назначение**: Для работы с массивами и векторными вычислениями.
   - **Пример использования**: Генерация случайных точек, создание кеша и вычисление максимальных координат.
   - **Пример кода**:
     ```python
     import numpy as np
     points = np.random.rand(num_points, 2)  # Генерация случайных точек
     ```

2. **`plotly.graph_objects`**:
   - **Назначение**: Для визуализации данных, включая построение графиков и анимации.
   - **Пример использования**: Отображение точек и треугольников на плоскости.
   - **Пример кода**:
     ```python
     import plotly.graph_objects as go
     fig = go.Figure()
     fig.add_trace(go.Scatter(x=points[:, 0], y=points[:, 1], mode='markers', marker=dict(color='red', size=5)))
     ```

3. **`math`**:
   - **Назначение**: Для математических операций, таких как вычисление квадратного корня и целочисленного деления.
   - **Пример использования**: Вычисление размера кеша.
   - **Пример кода**:
     ```python
     import math
     m = int((3 * math.sqrt(N) * s))  # Вычисление размера кеша
     ```

---

## 3. Структуры данных

Для реализации алгоритма использовались следующие структуры данных:

1. **Кеш**:
   - **Тип**: 2D-массив (`np.empty((size, size), dtype=object)`).
   - **Назначение**: Хранит ссылки на треугольники, связанные с каждым квадратом разбиения плоскости.
   - **Особенности**:
     - Начальный размер кеша — 2×2.
     - Размер кеша увеличивается динамически в 2 раза по каждой оси, если количество треугольников превышает \( 3 \cdot \text{cache\_size}^2 \).
   - **Пример кода**:
     ```python
     cache = np.empty((cache_size, cache_size), dtype=object)
     ```

2. **Треугольники**:
   - **Тип**: Множество (`set`).
   - **Назначение**: Хранит все треугольники триангуляции.
   - **Особенности**:
     - Каждый треугольник представлен кортежем из трех точек.
     - Используется для хранения и обновления текущих треугольников.
   - **Пример кода**:
     ```python
     triangles = {super_triangle}
     ```

3. **Точки**:
   - **Тип**: Массив `numpy` (`np.random.rand(num_points, 2)`).
   - **Назначение**: Хранит координаты точек, которые нужно триангулировать.
   - **Особенности**:
     - Точки генерируются случайным образом в диапазоне [0, 1].
   - **Пример кода**:
     ```python
     points = np.random.rand(num_points, 2)
     ```

4. **Рёбра**:
   - **Тип**: Список кортежей.
   - **Назначение**: Хранит рёбра треугольников для проверки и флипа.
   - **Особенности**:
     - Рёбра создаются на основе вершин треугольников.
   - **Пример кода**:
     ```python
     edges = [(triangle[0], triangle[1]), (triangle[1], triangle[2]), (triangle[2], triangle[0])]
     ```

---

## 4. Анализ вычислительной сложности

Алгоритм триангуляции Делоне с динамическим кешированием имеет следующую вычислительную сложность:

1. **Худший случай**: \( O(N^2) \).
   - Это происходит, если при каждом добавлении точки нужно проверять все треугольники.

2. **Средний случай**: \( O(N \log N) \).
   - Благодаря кешированию и динамическому увеличению кеша, алгоритм работает быстрее, чем в худшем случае.

### Основные операции и их сложность:

1. **Создание кеша**:
   - **Сложность**: \( O(m^2) \), где \( m \) — размер кеша.

2. **Локализация точки в кеше**:
   - **Сложность**: \( O(1) \).

3. **Поиск треугольника, содержащего точку**:
   - **Сложность**: \( O(1) \) (если точка находится в кеше) или \( O(T) \), где \( T \) — количество треугольников.

4. **Проверка вписанной окружности**:
   - **Сложность**: \( O(1) \).

5. **Флип рёбер**:
   - **Сложность**: \( O(E) \), где \( E \) — количество рёбер.

6. **Обновление кеша**:
   - **Сложность**: \( O(m^2 \cdot T) \).

7. **Увеличение кеша**:
   - **Сложность**: \( O(m^2) \).

---

## 5. Преимущества и недостатки

### Преимущества

1. **Эффективность благодаря кешированию**:
   - Кеш позволяет ускорить поиск треугольников, содержащих заданные точки.

2. **Адаптивность при увеличении кеша**:
   - Размер кеша увеличивается динамически, что позволяет эффективно работать с большими наборами данных.

### Недостатки

1. **Сложность в худшем случае \( O(N^2) \)**:
   - Если кеш не помогает ускорить поиск, алгоритм может работать медленно.

2. **Потребление памяти**:
   - Кеш может потреблять значительный объем памяти при большом количестве точек.

---

## 6. Заключение

Алгоритм триангуляции Делоне с динамическим кешированием представляет собой эффективный метод для работы с большими наборами данных. Благодаря кешированию и динамическому увеличению его размера, алгоритм работает быстрее, чем простой перебор треугольников. Однако в худшем случае его сложность может достигать \( O(N^2) \), что требует внимательного подхода к выбору параметров кеша.

---